<!-- sldsValidatorIgnore -->
<template>
  <!-- <lightning-card title="Vehicle Category">    
    <button
      class="slds-button slds-button_brand"
      onclick={showAddCategoryModal}
    >
      Add Vehicle Category
    </button>
  </lightning-card> 
-->


  <lightning-card>  
    <div class="slds-p-bottom_small slds-p-left_medium slds-p-right_medium">  
      <div class="slds-grid">
        <div class="slds-text-heading_small">
          <b>Vehicle Category</b>
        </div>
        <div class="slds-col_bump-left">
          <lightning-button variant="brand" label="Add Vehicle Category"  onclick={showAddCategoryModal} ></lightning-button>
        </div>      
      </div>
    </div>
  </lightning-card>

  <!--Model for inserting Vehicle Category-->

  <template if:true={isModalOpen}>
    <!-- Modal/Popup Box LWC starts here -->
    <section
      role="dialog"
      tabindex="-1"
      aria-labelledby="modal-heading-01"
      aria-modal="true"
      aria-describedby="modal-content-id-1"
      class="slds-modal slds-fade-in-open"
    >
      <div class="slds-modal__container">
        <!-- Modal/Popup Box LWC header here -->
        <header class="slds-modal__header">
          <button
            class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse"
            title="Close"
            onclick={closeModal}
          >
            <lightning-icon
              icon-name="utility:close"
              alternative-text="close"
              variant="inverse"
              size="small"
            ></lightning-icon>
            <span class="slds-assistive-text">Close</span>
          </button>
          <h2
            id="modal-heading-01"
            class="slds-text-heading_medium slds-hyphenate"
          >
            Add New Vehicle Category
          </h2>
        </header>
        <!-- Modal/Popup Box LWC body starts here -->
        <div
          class="slds-modal__content slds-p-around_medium"
          id="modal-content-id-1"
        >
          <lightning-input
            type="text"
            id="text-input-id-cat-name"
            name="catName"
            label="Enter Category Name"
            placeholder="Category Name"
            required
            class="inputCatName"
            value={categoryNameValue}
            onchange={getOnChangeValue}
          >
          </lightning-input>

          <lightning-input
            type="text"
            id="text-input-id-description-add"
            name="description"
            label="Enter Description"
            placeholder="Description"
            required
            class="inputDescription"
            value={descriptionValue}
            onchange={getOnChangeValue}
          >
          </lightning-input>
        </div>
        <!-- Modal/Popup Box LWC footer starts here -->
        <footer class="slds-modal__footer">
          <button
            class="slds-button slds-button_neutral"
            onclick={closeModal}
            title="Cancel"
          >
            Cancel
          </button>
          <button
            class="slds-button slds-button_brand"
            onclick={submitDetails}
            title="Submit"
          >
            Submit
          </button>
        </footer>
      </div>
    </section>
    <div class="slds-backdrop slds-backdrop_open"></div>
  </template>

  <!-- Model for delete the record -->
  <template if:true={isDeleteModalOpen}>
    <section
      role="dialog"
      tabindex="-1"
      aria-modal="true"
      aria-label="Meaningful description of the modal content"
      class="slds-modal slds-fade-in-open"
    >
      <div class="slds-modal__container">
        <button
          class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse"
          onclick={closeModal}
        >
          <svg
            class="slds-button__icon slds-button__icon_large"
            aria-hidden="true"
          >
            <use
              xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#close"
            ></use>
          </svg>
          <span class="slds-assistive-text">Cancel and close</span>
        </button>
        <div
          class="slds-modal__content slds-p-around_medium slds-modal__content_headless"
          id="modal-content-id-11"
        >
          <p>
            Are you sure to delete selected Vehicle Category ?
          </p>
        </div>
        <div class="slds-modal__footer">
          <button
            class="slds-button slds-button_neutral"
            aria-label="Cancel and close"
            onclick={closeModal}
          >
            No
          </button>
          <button
            class="slds-button slds-button_brand"
            onclick={deleteCategory}
          >
            Yes
          </button>
        </div>
      </div>
    </section>
    <div class="slds-backdrop slds-backdrop_open" role="presentation"></div>
  </template>

  <!--Model for Updating Vehicle Category-->

  <template if:true={isUpdateModalOpen}>
    <section
      role="dialog"
      tabindex="-1"
      aria-labelledby="modal-heading-01"
      aria-modal="true"
      aria-describedby="modal-content-id-1"
      class="slds-modal slds-fade-in-open"
    >
      <div class="slds-modal__container">
        <!-- Modal/Popup Box LWC header here -->
        <header class="slds-modal__header">
          <button
            class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse"
            title="Close"
            onclick={closeModal}
          >
            <lightning-icon
              icon-name="utility:close"
              alternative-text="close"
              variant="inverse"
              size="small"
            ></lightning-icon>
            <span class="slds-assistive-text">Close</span>
          </button>
          <h2
            id="modal-heading-21"
            class="slds-text-heading_medium slds-hyphenate"
          >
            Update Vehicle Category
          </h2>
        </header>
        <!-- Modal/Popup Box LWC body starts here -->
        <div
          class="slds-modal__content slds-p-around_medium"
          id="modal-content-id-31"
        >
          <lightning-input
            type="text"
            id="text-input-id-cat-name-update"
            name="catName"
            label="Enter Category"
            placeholder="Category Name"
            required
            class="inputCatName"
            value={categoryNameValue}
            onchange={getOnChangeValue}
            tabindex="0"
          >
          </lightning-input>
        </br>
          <lightning-input
            type="text"
            id="text-input-id-description-update"
            name="description"
            label="Enter Description"
            placeholder="Description"
            required       
            class="inputDescription"
            value={descriptionValue}
            onchange={getOnChangeValue}
          >
          </lightning-input>
        </div>
        <!-- Modal/Popup Box LWC footer starts here -->
        <footer class="slds-modal__footer">
          <button
            class="slds-button slds-button_neutral"
            onclick={closeModal}
            title="Cancel"
          >
            Cancel
          </button>
          <button
            class="slds-button slds-button_brand"
            onclick={updateCategory}
            title="Update"
          >
            Update
          </button>
        </footer>
      </div>
    </section>
    <div class="slds-backdrop slds-backdrop_open"></div>
  </template>

  <table
    class="slds-table slds-table_cell-buffer slds-table_bordered"
    aria-labelledby="element-with-table-label other-element-with-table-label"
  >
    <thead>
      <tr class="slds-line-height_reset">
        <th class="" scope="col">
          <div class="slds-truncate" title="Opportunity Name">
            Vehicle Category
          </div>
        </th>
        <th class="" scope="col">
          <div class="slds-truncate" title="Close Date">Description</div>
        </th>
        <th class="" scope="col">
          <div class="slds-truncate" title="Account Name">Published On</div>
        </th>
        <th class="" scope="col">
          <div class="slds-truncate" title="Stage">Actions</div>
        </th>
      </tr>
    </thead>
    <tbody>
      <template if:true={vehicleCategories.data}>
        <template for:each={vehicleCategories.data} for:item="cat">
          <tr class="slds-hint-parent" key={cat.Name}>
            <!-- <th data-label="Opportunity Name" scope="row">
              <div class="slds-truncate" title="Cloudhub">
                <a href="#" tabindex="-1">Cloudhub</a>
              </div>
            </th> -->
            <td data-label="Category Name">
              <div class="slds-truncate" title="CategoryName">
                {cat.vehicle_category__c}
              </div>
            </td>
            <td data-label="Category Description">
              <div class="slds-truncate" title="CategoryDescription">
                {cat.short_description__c}
              </div>
            </td>
            <td data-label="LastModifiedDate">
              <div class="slds-truncate" title="LastModifiedDate">
                <lightning-formatted-date-time
                  value={cat.LastModifiedDate}
                  year="numeric"
                  day="2-digit"
                  month="long"
                  hour="2-digit"
                  minute="2-digit"
                >
                </lightning-formatted-date-time>
              </div>
            </td>
            <td data-label="Action">
              <div class="slds-truncate" title="Action">
                <!-- <a href="#" tabindex="-1">Edit</a> &nbsp; -->
                <!-- <a href="#" tabindex="-1" onclick={showDeleteCategoryModel}
                  >Delete</a -->
                <button
                  class="slds-badge slds-theme_warning"
                  onclick={showUpdateCategoryModal}
                  value={cat.Id}
                >
                  Edit
                </button>
                <button
                  class="slds-badge slds-theme_error"
                  onclick={showDeleteCategoryModal}
                  value={cat.Id}
                >
                  Delete
                </button>
              </div>
            </td>
          </tr>
        </template>
      </template>     
    </tbody>
  </table>
</template>
